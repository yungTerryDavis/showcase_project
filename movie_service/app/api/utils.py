from sqlalchemy.ext.asyncio import AsyncSession

from movie_service.app.api.models import Movie
from movie_service.app.api.repository import get_objects_count


async def is_db_data_present() -> bool:
    return bool(await get_objects_count(Movie))


async def populate_movies_db(session: AsyncSession) -> None:
    """Заполняет таблицу Movie фильмами Светланы Басковой."""

    movies = [
        Movie(
            name="Зелёный слоник",
            plot=("История двух солдат, оказавшихся в замкнутом пространстве, "
                 "где обостряются психологические конфликты."),
            genres=["драма", "артхаус", "психологический"],
            casts=["Пётр Мамонов", "Владимир Епифанцев", "Сергей Пахомов"],
        ),
        Movie(
            name="Пять бутылок водки",
            plot=("Рассказ о жизни обычных людей в провинциальном баре, "
                 "где царит хаос, агрессия и отчуждение."),
            genres=["драма", "артхаус"],
            casts=["Сергей Пахомов", "Павел Баршак", "Ольга Турина"],
        ),
        Movie(
            name="Кокки — бегущий доктор",
            plot=("Черная комедия о необычном враче, странных пациентах "
                 "и тревожной атмосфере постсоветской провинции."),
            genres=["комедия", "артхаус"],
            casts=["Алексей Подвойский", "Александр Маслаков", "Сергей Пахомов"],
        ),
        Movie(
            name="За Маркса...",
            plot=("Социально-политическая драма о рабочих, профсоюзах и "
                 "борьбе за справедливость в современной России."),
            genres=["драма", "социальное кино"],
            casts=["Татьяна Егорова", "Александр Московцев", "Анна Кащеева"],
        ),
        Movie(
            name="Показательное выступление",
            plot=("Политическая сатира о протестах, насилии, государстве и "
                 "человеческой природе."),
            genres=["драма", "политическая сатира"],
            casts=["Сергей Пахомов", "Александр Маслаков", "Елена Маркина"],
        ),
    ]

    session.add_all(movies)
    await session.commit()
    print("Фильмы Светланы Басковой успешно добавлены!")
